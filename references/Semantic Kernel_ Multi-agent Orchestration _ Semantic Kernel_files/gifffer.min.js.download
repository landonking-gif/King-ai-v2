!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Gifffer",[],e):"object"==typeof exports?exports.Gifffer=e():t.Gifffer=e()}(this,function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var t=document;return function(e){var i,n=0,o=[];for(i=t.querySelectorAll("[data-gifffer]");n<i.length;++n)r(i[n],o,e);return o}}function e(t){var e="";for(prop in t)e+=prop+":"+t[prop]+";";return e}function i(i,r,n,o,a){var d,l=t.createElement("BUTTON"),s=n.getAttribute("class"),p=n.getAttribute("id"),f=a&&a.playButtonStyles?e(a.playButtonStyles):["width:60px","height:60px","border-radius:30px","background:rgba(0, 0, 0, 0.3)","position:absolute","top:50%","left:50%","margin:-30px"].join(";");a&&a.playButtonIconStyles?e(a.playButtonIconStyles):["width: 0","height: 0","border-top: 14px solid transparent","border-bottom: 14px solid transparent","border-left: 14px solid rgba(255, 255, 255, 0.5)","position: absolute","left: 26px","top: 16px"].join(";");s&&l.setAttribute("class",n.getAttribute("class")),p&&l.setAttribute("id",n.getAttribute("id")),l.setAttribute("style","position:relative;cursor:pointer;background:none;border:none;padding:0;"),l.setAttribute("aria-label","Gif Image"),l.classList.add("gif-responsive");var h=t.createElement("DIV");h.setAttribute("class","gifffer-play-button"),h.setAttribute("style",f);var u=t.createElement("span"),c=t.createElement("i");return c.setAttribute("class","fabric-icon fabric-icon--Play"),u.appendChild(c),h.appendChild(u),o&&((d=t.createElement("p")).setAttribute("class","gifffer-alt"),d.setAttribute("style","border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px;"),d.innerText=o+", image"),l.appendChild(h),n.parentNode.replaceChild(l,n),o&&l.parentNode.insertBefore(d,l.nextSibling),{c:l,p:h}}function r(t,e,r){var n,o,a,d,l,s,p,f,h,u,c,g,b,A=!1;n=t.getAttribute("data-gifffer"),d=t.getAttribute("data-gifffer-width"),l=t.getAttribute("data-gifffer-height"),s=t.getAttribute("data-gifffer-duration"),b=t.getAttribute("alt"),t.style.display="block",a=document.createElement("canvas"),u=!(!a.getContext||!a.getContext("2d")),d&&l&&u&&(h=i(0,0,t,b,r)),t.onload=function(){u&&(d=d||t.width,l=l||t.height,h||(h=i(0,0,t,b,r)),o=h.c,p=h.p,g=function(t,e,i,r,n){var o=t.parentNode.offsetWidth,a=t.parentNode.offsetHeight,d=r/n;return e.toString().indexOf("%")>0?i=(e=(e=parseInt(e.toString().replace("%","")))/100*o)/d:i.toString().indexOf("%")>0&&(e=(i=(i=parseInt(i.toString().replace("%","")))/100*a)*d),{w:e,h:i}}(o,d,l,t.width,t.height),e.push(o),o.addEventListener("click",function(){clearTimeout(c);const t=o.offsetWidth,e=t/(g.w/g.h);A?(A=!1,o.appendChild(p),o.removeChild(f),o.appendChild(a),f=null):(A=!0,(f=document.createElement("IMG")).setAttribute("style",`width: ${t}px; height: ${e}px;`),f.setAttribute("data-uri",Math.floor(1e5*Math.random())+1),f.setAttribute("alt",b),f.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",o.style.height=e+"px",setTimeout(function(){f.src=n},0),o.removeChild(p),o.removeChild(a),o.appendChild(f),parseInt(s)>0&&(c=setTimeout(function(){A=!1,o.appendChild(p),o.removeChild(f),o.appendChild(a),f=null},s)))}),a.width=g.w,a.height=g.h,a.getContext("2d").drawImage(t,0,0,g.w,g.h),o.appendChild(a),o.style.position="relative",o.style.cursor="pointer",o.style.background="none",o.style.border="none",o.style.padding="0",o.style.width="auto",o.style.maxWidth="100%",o.style.height="auto",window.addEventListener("resize",function(){var e=o.offsetWidth,i=e/(g.w/g.h);if(o.style.width=e+"px",o.style.height=i+"px",f)f.style.width=e+"px",f.style.height=i+"px";else{a.width=e,a.height=i;const r=a.getContext("2d");r.clearRect(0,0,a.width,a.height),r.drawImage(t,0,0,a.width,a.height)}}))},t.src=n}});
//# sourceMappingURL=gifffer.min.js.map